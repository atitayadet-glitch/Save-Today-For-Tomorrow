<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Saving Planner</title>

<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
font-family:'Prompt',sans-serif;
background:linear-gradient(135deg,#74ebd5,#9face6);
min-height:100vh;
margin:0;
display:flex;
justify-content:center;
align-items:center;
padding:15px;
}
.container{
background:#fff;
width:100%;
max-width:420px;
padding:20px;
border-radius:20px;
box-shadow:0 10px 30px rgba(0,0,0,.15);
}
h1{
text-align:center;
color:#4b4b8f;
}
.game-box{
background:#f0f3ff;
padding:15px;
border-radius:15px;
text-align:center;
margin-bottom:20px;
font-size:14px;
}
.progress-bar{
background:#ddd;
height:14px;
border-radius:20px;
overflow:hidden;
margin-top:10px;
}
.progress{
height:100%;
width:0%;
background:linear-gradient(90deg,#6c63ff,#74ebd5);
transition:.4s;
}
label{font-size:14px}
input,select{
width:100%;
padding:12px;
margin:6px 0 15px;
font-size:16px;
border-radius:12px;
border:1px solid #ccc;
}
button{
width:100%;
padding:14px;
font-size:17px;
border:none;
border-radius:14px;
background:#6c63ff;
color:#fff;
}
.result{
margin-top:20px;
background:#f5f7ff;
padding:15px;
border-radius:14px;
font-size:14px;
}
.invest{
margin-top:12px;
background:#fff;
padding:12px;
border-left:5px solid #6c63ff;
border-radius:10px;
}
.invest-detail{
margin-top:8px;
font-size:13px;
line-height:1.6;
}
.admin-link{
display:block;
text-align:center;
margin-top:15px;
color:#6c63ff;
font-size:14px;
text-decoration:none;
}
</style>
</head>

<body>

<div class="container">

<!-- Gamification + User Count -->
<div class="game-box">
‚≠ê Points: <span id="points">0</span> |
üèÜ Level: <span id="level">1</span><br>
<span id="badge">üéñ ‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≤‡∏¢‡∏≠‡∏≠‡∏°</span><br>
üë• ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="userCount">0</span> ‡∏Ñ‡∏ô

<div class="progress-bar">
<div class="progress" id="progress"></div>
</div>
<small>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</small>
</div>

<h1>üìä ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡πÄ‡∏á‡∏¥‡∏ô</h1>

<label>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
<input type="text" inputmode="numeric" id="income">

<label>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
<input type="text" inputmode="numeric" id="expense">

<label>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏° (‡∏ö‡∏≤‡∏ó)</label>
<input type="text" inputmode="numeric" id="goal">

<label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</label>
<select id="risk">
<option value="low">‡∏ï‡πà‡∏≥</option>
<option value="medium">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
<option value="high">‡∏™‡∏π‡∏á</option>
</select>

<button onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</button>

<div class="result" id="result" style="display:none">
<p id="saving"></p>
<p id="months"></p>
<div class="invest" id="investPlan"></div>
<div class="invest-detail" id="investDetail"></div>
</div>

<!-- Link to Admin -->
<a href="admin.html" class="admin-link">üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö</a>

</div>

<script>
/* ================= ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ================= */
let userCount = localStorage.getItem("userCount");
userCount = userCount ? Number(userCount) + 1 : 1;
localStorage.setItem("userCount", userCount);
document.getElementById("userCount").innerText = userCount.toLocaleString();

/* ================= ‡∏Ñ‡∏≠‡∏°‡∏°‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ================= */
function formatComma(val){
val = val.replace(/,/g,'').replace(/\D/g,'');
return val ? Number(val).toLocaleString() : '';
}
document.querySelectorAll("input[inputmode='numeric']").forEach(i=>{
i.addEventListener("input",()=> i.value = formatComma(i.value));
});
function num(id){
return Number(document.getElementById(id).value.replace(/,/g,''));
}

/* ================= Gamification ================= */
let points = 0;
let level = 1;

function updateGame(saving,goal){
points += 10;
level = Math.floor(points/50)+1;
document.getElementById("points").innerText = points;
document.getElementById("level").innerText = level;

let badge="üéñ ‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≤‡∏¢‡∏≠‡∏≠‡∏°";
if(level>=3) badge="ü•â ‡∏ô‡∏±‡∏Å‡∏≠‡∏≠‡∏°‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î";
if(level>=5) badge="ü•à ‡∏ô‡∏±‡∏Å‡∏≠‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á";
if(level>=8) badge="ü•á ‡∏õ‡∏£‡∏°‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô";
document.getElementById("badge").innerText = badge;

let progress = Math.min((saving/goal)*100,100);
document.getElementById("progress").style.width = progress+"%";
}

/* ================= ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ================= */
// ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Admin Dashboard
function saveUserData(income,expense,goal,risk){
let users = JSON.parse(localStorage.getItem("users")) || [];
let now = new Date();

users.push({
id: users.length + 1,
date: now.toLocaleString(),
income: income,
expense: expense,
goal: goal,
risk: risk
});

localStorage.setItem("users", JSON.stringify(users));
}

/* ================= ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ================= */
function calculate(){
let income=num("income"),
expense=num("expense"),
goal=num("goal"),
risk=document.getElementById("risk").value;

let saving = income-expense;
if(saving<=0 || !goal){
alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
return;
}

let months = Math.ceil(goal/saving);
document.getElementById("saving").innerHTML =
`üí∞ ‡∏≠‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô <b>${saving.toLocaleString()} ‡∏ö‡∏≤‡∏ó</b>`;
document.getElementById("months").innerHTML =
`‚è≥ ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ <b>${months.toLocaleString()} ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</b>`;

let plan={
low:["üîµ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥","‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å 60%<br>‡∏û‡∏±‡∏ô‡∏ò‡∏ö‡∏±‡∏ï‡∏£ 30%<br>‡∏ï‡∏£‡∏≤‡∏™‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ 10%<br>‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô 1‚Äì3%"],
medium:["üü° ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á","‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ú‡∏™‡∏° 40%<br>‡∏´‡∏∏‡πâ‡∏ô 30%<br>‡∏ï‡∏£‡∏≤‡∏™‡∏≤‡∏£‡∏´‡∏ô‡∏µ‡πâ 20%<br>‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î 10%<br>‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô 4‚Äì7%"],
high:["üî¥ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á","‡∏´‡∏∏‡πâ‡∏ô/ETF 60%<br>‡∏´‡∏∏‡πâ‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® 20%<br>‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 10%<br>‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î 10%<br>‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô 8‚Äì12%"]
};

document.getElementById("investPlan").innerHTML = plan[risk][0];
document.getElementById("investDetail").innerHTML = plan[risk][1];
document.getElementById("result").style.display="block";

updateGame(saving,goal);

// ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡πÉ‡∏ô session ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
if(!sessionStorage.getItem("saved")){
saveUserData(income,expense,goal,risk);
sessionStorage.setItem("saved","true");
}
}
</script>

</body>
</html>